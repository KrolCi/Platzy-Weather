!function(){function e(e){console.log("Ocurrió un error: "+e.code)}function t(e){var t=e.coords.latitude,a=e.coords.longitude;console.log("Tu posición es: "+t+","+a),$.getJSON(u+"lat="+t+"&lon="+a,n)}function n(e){h.zone=e.name,h.icon=d+e.weather[0].icon+".png",h.temp=e.main.temp-273.15,h.temp_max=e.main.temp_max-273.15,h.temp_min=e.main.temp_min-273.15,h.main=e.weather[0].main,o(h)}function a(e){var t=document.querySelector(e);return document.importNode(t.content,!0)}function o(e,t){var n,o=a("#template--city");n=t?t.split(" ")[1]:s,o.querySelector("[data-time]").innerHTML=n,o.querySelector("[data-city]").innerHTML=e.zone,o.querySelector("[data-icon]").src=e.icon,o.querySelector("[data-temp='max']").innerHTML=e.temp_max.toFixed(1),o.querySelector("[data-temp='min']").innerHTML=e.temp_min.toFixed(1),o.querySelector("[data-temp='current']").innerHTML=e.temp.toFixed(1),$(S).hide(),$(v).append(o)}function i(e){e.preventDefault(),$.getJSON(u+"q="+$(y).val(),r)}function r(e){$.getJSON(p+$(y).val(),function(t){$(y).val(""),h={},h.zone=e.name,h.icon=d+e.weather[0].icon+".png",h.temp=e.main.temp-273.15,h.temp_max=e.main.temp_max-273.15,h.temp_min=e.main.temp_min-273.15,h.main=e.weather[0].main,o(h,t.data.time_zone[0].localtime),f.push(h),localStorage.setItem("cities",JSON.stringify(f))})}function c(e){function t(e){e.forEach(function(e){o(e)})}e.preventDefault();var n=JSON.parse(localStorage.getItem("cities"));t(n)}var m="0856c982ef9341d549db3530663dc",p="http://api.worldweatheronline.com/free/v2/tz.ashx?format=json&key="+m+"&q=",l="80114c7878f599621184a687fc500a12",u="http://api.openweathermap.org/data/2.5/weather?APPID="+l+"&",d="http://openweathermap.org/img/w/",f=[],g=new Date,s=g.toLocaleTimeString(),h={};h.zone,h.icon,h.temp,h.temp_max,h.temp_min,h.main;var v=$("body"),S=$(".loader"),y=$("[data-input='cityAdd']"),_=$("[data-button='add']"),w=$("[data-saved-cities]");$(_).on("click",i),$(y).on("keypress",function(e){13==e.which&&i(e)}),$(w).on("click",c),navigator.geolocation?navigator.geolocation.getCurrentPosition(t,e):alert("actualiza tu navegador")}();